{% extends 'flights/base.html' %}

{% block title %}–ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤{% endblock %}

{% block content %}
<h2>üîç –ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤</h2>

<form method="get" style="background: white; padding: 15px; border-radius: 5px;">
    <input type="text" name="city" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥..." value="{{ city }}">
    <select name="search_type">
        <option value="destination" {% if search_type == 'destination' %}selected{% endif %}>–ü–æ –≥–æ—Ä–æ–¥—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</option>
        <option value="departure" {% if search_type == 'departure' %}selected{% endif %}>–ü–æ –≥–æ—Ä–æ–¥—É –≤—ã–ª–µ—Ç–∞</option>
    </select>
    <button type="submit">üîç –ò—Å–∫–∞—Ç—å</button>
</form>

{% if city %}
    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è "{{ city }}" ({{ search_type }}):</h3>
    {% if flights %}
        {% for flight in flights %}
        <div class="flight-item">
            <h3>‚úàÔ∏è –†–µ–π—Å {{ flight.number }}: {{ flight.departure_city }} ‚Üí {{ flight.destination_city }}</h3>
            <p><strong>–í—ã–ª–µ—Ç:</strong> {{ flight.departure_time|date:"d.m.Y H:i" }}</p>
            <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span class="status-{{ flight.status }}">{{ flight.get_status_display }}</span></p>
        </div>
        {% endfor %}
    {% else %}
        <p>–†–µ–π—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –¥–ª—è –≥–æ—Ä–æ–¥–∞ "{{ city }}".</p>
    {% endif %}
{% endif %}
{% endblock %}