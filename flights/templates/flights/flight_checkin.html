{% extends 'flights/base.html' %}

{% block title %}–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ä–µ–π—Å {{ flight.number }}{% endblock %}

{% block content %}
<div style="background: linear-gradient(135deg, #ff7675 0%, #fdcb6e 100%); color: white; padding: 25px; border-radius: 10px; margin: 20px 0;">
    <h1>üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ä–µ–π—Å {{ flight.number }}</h1>
    <p><strong>–ú–∞—Ä—à—Ä—É—Ç:</strong> {{ flight.departure_city }} ‚Üí {{ flight.destination_city }}</p>
    <p><strong>–í—ã–ª–µ—Ç:</strong> {{ flight.departure_time|date:"d.m.Y H:i" }}</p>
    <p><strong>–í—ã—Ö–æ–¥:</strong> {{ flight.gate }}</p>
    <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span class="status-{{ flight.status }}">{{ flight.get_status_display }}</span></p>
</div>

{% if messages %}
    {% for message in messages %}
    <div style="background: {% if message.tags == 'success' %}#27ae60{% else %}#e74c3c{% endif %}; color: white; padding: 15px; border-radius: 5px; margin: 15px 0;">
        {{ message }}
    </div>
    {% endfor %}
{% endif %}

<!-- –ë–´–°–¢–†–´–ô –ü–û–ò–°–ö –ü–ê–°–°–ê–ñ–ò–†–û–í -->
<div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin: 20px 0;">
    <h2>üîç –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤</h2>

    <form method="get" action="{% url 'flights:passenger_lookup' %}" style="display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: end;">
        <div>
            <label><strong>–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, —Ñ–∞–º–∏–ª–∏–∏ –∏–ª–∏ –ø–∞—Å–ø–æ—Ä—Ç—É:</strong></label>
            <input type="text" name="search" style="width: 100%; padding: 12px; margin: 5px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 16px;" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–ª—è –ø–æ–∏—Å–∫–∞...">
        </div>
        <button type="submit" style="background: #e67e22; color: white; padding: 12px 25px; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; height: fit-content;">
            üîç –ù–∞–π—Ç–∏
        </button>
    </form>

    <div style="margin-top: 15px; display: flex; gap: 15px; flex-wrap: wrap;">
        <a href="{% url 'flights:passenger_lookup' %}?search=–ò–≤–∞–Ω" style="background: #f8f9fa; color: #666; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-size: 14px;">
            –ò–≤–∞–Ω
        </a>
        <a href="{% url 'flights:passenger_lookup' %}?search=–ü–µ—Ç—Ä" style="background: #f8f9fa; color: #666; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-size: 14px;">
            –ü–µ—Ç—Ä
        </a>
        <a href="{% url 'flights:passenger_lookup' %}?search=–ú–∞—Ä–∏—è" style="background: #f8f9fa; color: #666; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-size: 14px;">
            –ú–∞—Ä–∏—è
        </a>
        <a href="{% url 'flights:passenger_lookup' %}?search=123" style="background: #f8f9fa; color: #666; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-size: 14px;">
            –ü–∞—Å–ø–æ—Ä—Ç 123...
        </a>
    </div>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 30px 0;">

    <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ -->
    <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <h2>üë• –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤</h2>

        {% if available_passengers %}
        <form method="post">
            {% csrf_token %}

            <div style="margin-bottom: 20px;">
                <label><strong>–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Å—Å–∞–∂–∏—Ä–∞:</strong></label>
                <select name="passenger_id" required style="width: 100%; padding: 12px; margin: 10px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 16px;">
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Å—Å–∞–∂–∏—Ä–∞ --</option>
                    {% for passenger in available_passengers %}
                    <option value="{{ passenger.id }}">
                        {{ passenger.first_name }} {{ passenger.last_name }} (–ü–∞—Å–ø–æ—Ä—Ç: {{ passenger.passport_number }})
                    </option>
                    {% endfor %}
                </select>
            </div>

            <div style="margin-bottom: 20px;">
                <label><strong>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ:</strong></label>
                <select name="seat_number" required style="width: 100%; padding: 12px; margin: 10px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 16px;">
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ --</option>
                    {% for seat in available_seats %}
                    <option value="{{ seat }}">{{ seat }}</option>
                    {% endfor %}
                </select>
            </div>

            <button type="submit" style="background: #3498db; color: white; padding: 15px 30px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; width: 100%;">
                ‚úÖ –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨ –ü–ê–°–°–ê–ñ–ò–†–ê
            </button>
        </form>
        {% else %}
        <div style="background: #f8f9fa; padding: 30px; border-radius: 5px; text-align: center;">
            <h3 style="color: #27ae60;">üéâ –í—Å–µ –ø–∞—Å—Å–∞–∂–∏—Ä—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã!</h3>
            <p>–ù–∞ —ç—Ç–æ–º —Ä–µ–π—Å–µ –Ω–µ—Ç –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.</p>
        </div>
        {% endif %}
    </div>

    <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞—Å—Å–∞–∂–∏—Ä–∞ -->
    <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <h2>‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–∞—Å—Å–∞–∂–∏—Ä–∞</h2>

        <form method="post">
            {% csrf_token %}

            <!-- –î–û–ë–ê–í–õ–ï–ù–û: –ù–æ–º–µ—Ä —Ä–µ–π—Å–∞ -->
            <div style="margin-bottom: 20px;">
                <label><strong>–ù–æ–º–µ—Ä —Ä–µ–π—Å–∞:</strong></label>
                <input type="text" name="flight_number" value="{{ flight.number }}" readonly
                       style="width: 100%; padding: 12px; margin: 5px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 16px; background: #f8f9fa;"
                       placeholder="{{ flight.number }}">
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                <div>
                    <label><strong>–ò–º—è:</strong></label>
                    <input type="text" name="new_first_name" required style="width: 100%; padding: 12px; margin: 5px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 16px;" placeholder="–ò–≤–∞–Ω">
                </div>
                <div>
                    <label><strong>–§–∞–º–∏–ª–∏—è:</strong></label>
                    <input type="text" name="new_last_name" required style="width: 100%; padding: 12px; margin: 5px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 16px;" placeholder="–ò–≤–∞–Ω–æ–≤">
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <label><strong>–ù–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞:</strong></label>
                <input type="text" name="new_passport" required style="width: 100%; padding: 12px; margin: 5px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 16px;" placeholder="1234567890">
            </div>

            <!-- –î–û–ë–ê–í–õ–ï–ù–û: Email -->
            <div style="margin-bottom: 20px;">
                <label><strong>Email:</strong></label>
                <input type="email" name="new_email" style="width: 100%; padding: 12px; margin: 5px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 16px;" placeholder="ivanov@example.com">
            </div>

            <!-- –î–û–ë–ê–í–õ–ï–ù–û: –¢–µ–ª–µ—Ñ–æ–Ω -->
            <div style="margin-bottom: 20px;">
                <label><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong></label>
                <input type="tel" name="new_phone" style="width: 100%; padding: 12px; margin: 5px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 16px;" placeholder="+7 (999) 123-45-67">
            </div>

            <div style="margin-bottom: 20px;">
                <label><strong>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ:</strong></label>
                <select name="new_seat_number" required style="width: 100%; padding: 12px; margin: 10px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 16px;">
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ --</option>
                    {% for seat in available_seats %}
                    <option value="{{ seat }}">{{ seat }}</option>
                    {% endfor %}
                </select>
            </div>

            <button type="submit" style="background: #27ae60; color: white; padding: 15px 30px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; width: 100%;">
                üöÄ –°–û–ó–î–ê–¢–¨ –ò –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨
            </button>
        </form>

        <div style="margin-top: 20px; padding: 15px; background: #e8f4fd; border-radius: 5px;">
            <strong>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞:</strong>
            –ù–æ–≤—ã–π –ø–∞—Å—Å–∞–∂–∏—Ä –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Ä–µ–π—Å <strong>{{ flight.number }}</strong>.
        </div>
    </div>
</div>

<!-- –û—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å —à–∞–±–ª–æ–Ω–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
<!-- ... -->

{% endblock %}