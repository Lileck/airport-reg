{% extends 'flights/base.html' %}

{% block content %}
<div style="background: blue; color: white; padding: 30px; margin: 20px 0; border-radius: 10px;">
    <h1>‚úÖ –ü–û–ò–°–ö –ü–ê–°–°–ê–ñ–ò–†–ê –†–ê–ë–û–¢–ê–ï–¢!</h1>
</div>

<h2>üîç –ü–æ–∏—Å–∫ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤</h2>
<form method="get">
    <input type="text" name="search" placeholder="–ò–º—è, —Ñ–∞–º–∏–ª–∏—è –∏–ª–∏ –ø–∞—Å–ø–æ—Ä—Ç" value="{{ search_query }}">
    <button type="submit">–ò—Å–∫–∞—Ç—å</button>
</form>

{% if passengers %}
    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:</h3>
    {% for passenger in passengers %}
    <div style="border: 1px solid #ccc; padding: 10px; margin: 5px 0;">
        {{ passenger.first_name }} {{ passenger.last_name }} (–ü–∞—Å–ø–æ—Ä—Ç: {{ passenger.passport_number }})
    </div>
    {% endfor %}
{% elif search_query %}
    <p>–ü–∞—Å—Å–∞–∂–∏—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
{% endif %}

<a href="{% url 'flights:flight_list' %}">‚Üê –ù–∞–∑–∞–¥</a>
{% endblock %}


{% block title %}–ü–æ–∏—Å–∫ –ø–∞—Å—Å–∞–∂–∏—Ä–∞{% endblock %}


<div style="background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); color: white; padding: 40px; border-radius: 10px; text-align: center; margin: 20px 0;">
    <h1>üîç –ü–æ–∏—Å–∫ –ø–∞—Å—Å–∞–∂–∏—Ä–∞</h1>
    <p>–ü–æ–∏—Å–∫ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Ä–µ–π—Å—ã</p>
</div>

<div style="background: white; padding: 20px; border-radius: 5px; margin: 20px 0;">
    <form method="get">
        <input type="text" name="search" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è, —Ñ–∞–º–∏–ª–∏—é –∏–ª–∏ –Ω–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞..."
               value="{{ search_query }}" style="width: 300px; padding: 10px;">
        <button type="submit" class="btn">üîç –ò—Å–∫–∞—Ç—å</button>
    </form>
</div>

{% if search_query %}
    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è "{{ search_query }}"</h2>

    {% if passengers %}
        {% for passenger in passengers %}
        <div class="flight-item">
            <h3>{{ passenger.first_name }} {{ passenger.last_name }}</h3>
            <p><strong>–ü–∞—Å–ø–æ—Ä—Ç:</strong> {{ passenger.passport_number }}</p>
            <p><strong>–†–µ–π—Å:</strong> {{ passenger.flight.number }}</p>
            <p><strong>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> {{ passenger.flight.departure_city }} ‚Üí {{ passenger.flight.destination_city }}</p>
            <a href="{% url 'flights:flight_checkin' passenger.flight.id %}" class="btn">
                üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–π—Å {{ passenger.flight.number }}
            </a>
        </div>
        {% endfor %}
    {% else %}
        <div style="background: white; padding: 20px; border-radius: 5px; text-align: center;">
            <p>‚ùå –ü–∞—Å—Å–∞–∂–∏—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
        </div>
    {% endif %}
{% endif %}

<a href="{% url 'flights:agent_dashboard' %}" class="btn">‚Üê –ù–∞–∑–∞–¥ –∫ –ø–∞–Ω–µ–ª–∏ –∞–≥–µ–Ω—Ç–∞</a>
